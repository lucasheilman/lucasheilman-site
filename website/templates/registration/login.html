{% extends 'website/base.html' %}

{% block content %}
<br>
<br>

{% if form.errors %}
  <p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method="post" action="{% url 'login' %}">
  {% csrf_token %}
  <table>
    <tr>
      <td>{{ form.username.label_tag }}</td>
      <td>{{ form.username }}</td>
    </tr>
    <tr>
      <td>{{ form.password.label_tag }}</td>
      <td>{{ form.password }}</td>
    </tr>
  </table>
  <input type="submit" value="login" />
</form>

<p><a href="{% url 'new_user' %}">New User</a></p>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Enable all submit buttons initially
        document.querySelectorAll("button[type='submit']").forEach(function(button) {
            button.disabled = false;
        });

        // Add event listener to all forms
        document.querySelectorAll("form").forEach(function(form) {
            form.addEventListener('submit', function(event) {
                // Disable all submit buttons to prevent multiple submissions
                document.querySelectorAll("button[type='submit']").forEach(function(button) {
                    button.disabled = true;
                });
            });
        });
    });
</script>

{% endblock %}