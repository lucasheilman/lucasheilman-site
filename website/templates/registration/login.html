{% extends 'website/base.html' %}

{% block content %}
<br>
<br>

{% if form.errors %}
  <p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method="post" action="{% url 'login' %}">
  {% csrf_token %}
  <table>
    <tr>
      <td>{{ form.username.label_tag }}</td>
      <td>{{ form.username }}</td>
    </tr>
    <tr>
      <td>{{ form.password.label_tag }}</td>
      <td>{{ form.password }}</td>
    </tr>
  </table>
  <input id="submit-id-login" type="submit" value="login" />
</form>

<p><a href="{% url 'new_user' %}">New User</a></p>

<script>
  // Enable all submit buttons initially
  document.querySelectorAll("[id^='submit-id']").forEach(function(button) {
      button.style.display = '';
  });

  // Add event listener to all forms
  document.querySelectorAll("form").forEach(function(form) {
      form.addEventListener('submit', function(event) {
          // Disable all submit buttons to prevent multiple submissions
          document.querySelectorAll("[id^='submit-id']").forEach(function(button) {
              button.style.display = 'none';
          });
      });
  });
</script>

{% endblock %}